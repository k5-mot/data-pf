<svg viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- グラデーション定義 -->
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#4285f4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#34a853;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="airflowGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#017cee;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00d4aa;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="sparkGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#e25a1c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f79100;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="mlflowGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#0194e2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#43c9ed;stop-opacity:1" />
    </linearGradient>
  </defs>

  <!-- 背景 -->
  <rect width="1400" height="900" fill="#f8f9fa"/>
  
  <!-- ヘッダー -->
  <rect x="20" y="20" width="1360" height="60" rx="10" fill="url(#headerGrad)"/>
  <text x="700" y="55" text-anchor="middle" font-family="Arial" font-size="24" font-weight="bold" fill="white">株価分析自動化システム - データレイクハウス基盤</text>

  <!-- ワークフローオーケストレーション -->
  <rect x="40" y="100" width="1320" height="80" rx="15" fill="#e8f0fe" stroke="#1976d2" stroke-width="2"/>
  <text x="60" y="125" font-family="Arial" font-size="16" font-weight="bold" fill="#1976d2">ワークフローオーケストレーション</text>
  
  <!-- Airflow -->
  <rect x="300" y="130" width="800" height="40" rx="8" fill="url(#airflowGrad)"/>
  <text x="700" y="155" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold" fill="white">Apache Airflow</text>
  <text x="500" y="155" text-anchor="middle" font-family="Arial" font-size="12" fill="white">スケジューリング</text>
  <text x="700" y="155" text-anchor="middle" font-family="Arial" font-size="12" fill="white">モニタリング</text>
  <text x="900" y="155" text-anchor="middle" font-family="Arial" font-size="12" fill="white">ワークフロー管理</text>

  <!-- データソース -->
  <rect x="40" y="200" width="180" height="200" rx="10" fill="#fff3e0" stroke="#f57c00" stroke-width="2"/>
  <text x="130" y="225" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#f57c00">データソース</text>
  
  <!-- 株価データAPI -->
  <rect x="60" y="240" width="140" height="40" rx="5" fill="#ffcc02"/>
  <text x="130" y="265" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="#333">株価データAPI</text>
  
  <!-- 経済指標 -->
  <rect x="60" y="290" width="140" height="40" rx="5" fill="#4caf50"/>
  <text x="130" y="315" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">経済指標</text>
  
  <!-- ニュースデータ -->
  <rect x="60" y="340" width="140" height="40" rx="5" fill="#2196f3"/>
  <text x="130" y="365" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">ニュースデータ</text>

  <!-- データインジェクション -->
  <rect x="250" y="200" width="150" height="120" rx="10" fill="#f3f4f6" stroke="#6b7280" stroke-width="2"/>
  <text x="325" y="225" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#374151">データインジェクション</text>
  
  <!-- Apache Spark -->
  <rect x="270" y="240" width="110" height="70" rx="5" fill="url(#sparkGrad)"/>
  <text x="325" y="265" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">Apache</text>
  <text x="325" y="280" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">Spark</text>
  <text x="325" y="295" text-anchor="middle" font-family="Arial" font-size="10" fill="white">ストリーミング処理</text>

  <!-- データレイクハウス -->
  <rect x="430" y="200" width="320" height="460" rx="15" fill="#f0f9ff" stroke="#0284c7" stroke-width="3"/>
  <text x="590" y="225" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="#0284c7">データレイクハウス</text>

  <!-- メダリオンアーキテクチャ -->
  <text x="450" y="250" font-family="Arial" font-size="12" font-weight="bold" fill="#0369a1">メダリオンアーキテクチャ</text>
  
  <!-- Bronze Layer -->
  <rect x="450" y="260" width="80" height="60" rx="5" fill="#cd7f32"/>
  <text x="490" y="280" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">Bronze</text>
  <text x="490" y="295" text-anchor="middle" font-family="Arial" font-size="8" fill="white">Raw Data</text>
  <text x="490" y="305" text-anchor="middle" font-family="Arial" font-size="8" fill="white">Delta Lake</text>

  <!-- Silver Layer -->
  <rect x="540" y="260" width="80" height="60" rx="5" fill="#c0c0c0"/>
  <text x="580" y="280" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="#333">Silver</text>
  <text x="580" y="295" text-anchor="middle" font-family="Arial" font-size="8" fill="#333">Cleaned</text>
  <text x="580" y="305" text-anchor="middle" font-family="Arial" font-size="8" fill="#333">Delta Lake</text>

  <!-- Gold Layer -->
  <rect x="630" y="260" width="80" height="60" rx="5" fill="#ffd700"/>
  <text x="670" y="280" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="#333">Gold</text>
  <text x="670" y="295" text-anchor="middle" font-family="Arial" font-size="8" fill="#333">Aggregated</text>
  <text x="670" y="305" text-anchor="middle" font-family="Arial" font-size="8" fill="#333">Delta Lake</text>

  <!-- オブジェクトストレージ -->
  <rect x="450" y="340" width="280" height="60" rx="8" fill="#ff6b6b"/>
  <text x="590" y="365" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="white">MinIO Object Storage</text>
  <text x="590" y="380" text-anchor="middle" font-family="Arial" font-size="10" fill="white">S3互換オブジェクトストレージ</text>

  <!-- メタデータストア -->
  <rect x="450" y="420" width="130" height="60" rx="8" fill="#4ecdc4"/>
  <text x="515" y="445" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">Hive</text>
  <text x="515" y="460" text-anchor="middle" font-family="Arial" font-size="10" fill="white">メタデータストア</text>

  <!-- コンピューティング -->
  <rect x="600" y="420" width="130" height="60" rx="8" fill="url(#sparkGrad)"/>
  <text x="665" y="445" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">Apache Spark</text>
  <text x="665" y="460" text-anchor="middle" font-family="Arial" font-size="10" fill="white">分散処理エンジン</text>

  <!-- データカタログ -->
  <rect x="450" y="500" width="280" height="50" rx="8" fill="#9c27b0"/>
  <text x="590" y="530" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="white">Apache Atlas - データカタログ</text>

  <!-- データトランスフォーム -->
  <rect x="450" y="570" width="130" height="80" rx="8" fill="#2e7d32"/>
  <text x="515" y="595" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">dbt</text>
  <text x="515" y="610" text-anchor="middle" font-family="Arial" font-size="10" fill="white">データ変換</text>
  <text x="515" y="625" text-anchor="middle" font-family="Arial" font-size="10" fill="white">SQL ベース</text>

  <!-- データ品質チェック -->
  <rect x="600" y="570" width="130" height="80" rx="8" fill="#f44336"/>
  <text x="665" y="595" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">Deequ</text>
  <text x="665" y="610" text-anchor="middle" font-family="Arial" font-size="10" fill="white">データ品質</text>
  <text x="665" y="625" text-anchor="middle" font-family="Arial" font-size="10" fill="white">チェック</text>

  <!-- 機械学習モデル -->
  <rect x="780" y="200" width="280" height="300" rx="15" fill="#fff8e1" stroke="#ff8f00" stroke-width="2"/>
  <text x="920" y="225" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="#ff8f00">機械学習モデル</text>

  <!-- MLflow -->
  <rect x="800" y="240" width="240" height="80" rx="8" fill="url(#mlflowGrad)"/>
  <text x="920" y="265" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="white">MLflow</text>
  <text x="840" y="290" text-anchor="middle" font-family="Arial" font-size="10" fill="white">実験管理</text>
  <text x="920" y="290" text-anchor="middle" font-family="Arial" font-size="10" fill="white">モデル管理</text>
  <text x="1000" y="290" text-anchor="middle" font-family="Arial" font-size="10" fill="white">デプロイメント</text>

  <!-- Spark MLlib -->
  <rect x="800" y="340" width="240" height="80" rx="8" fill="url(#sparkGrad)"/>
  <text x="920" y="365" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="white">Spark MLlib</text>
  <text x="840" y="390" text-anchor="middle" font-family="Arial" font-size="10" fill="white">時系列分析</text>
  <text x="920" y="390" text-anchor="middle" font-family="Arial" font-size="10" fill="white">回帰分析</text>
  <text x="1000" y="390" text-anchor="middle" font-family="Arial" font-size="10" fill="white">分類モデル</text>

  <!-- モデル成果物 -->
  <rect x="800" y="440" width="110" height="50" rx="5" fill="#4caf50"/>
  <text x="855" y="465" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">価格予測モデル</text>

  <rect x="930" y="440" width="110" height="50" rx="5" fill="#2196f3"/>
  <text x="985" y="465" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">リスク評価モデル</text>

  <!-- データビジュアライゼーション -->
  <rect x="780" y="520" width="280" height="140" rx="15" fill="#e8f5e8" stroke="#4caf50" stroke-width="2"/>
  <text x="920" y="545" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="#4caf50">データビジュアライゼーション</text>

  <!-- Metabase -->
  <rect x="800" y="560" width="240" height="50" rx="8" fill="#509ee3"/>
  <text x="920" y="590" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="white">Metabase</text>

  <!-- Superset (代替案) -->
  <rect x="800" y="620" width="240" height="30" rx="5" fill="#20a7c9" opacity="0.7"/>
  <text x="920" y="640" text-anchor="middle" font-family="Arial" font-size="12" fill="white">(代替案) Apache Superset</text>

  <!-- 株価分析システム -->
  <rect x="1090" y="200" width="260" height="300" rx="15" fill="#fce4ec" stroke="#e91e63" stroke-width="2"/>
  <text x="1220" y="225" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="#e91e63">株価分析システム</text>

  <!-- システム機能 -->
  <rect x="1110" y="250" width="220" height="240" rx="8" fill="white" stroke="#e91e63"/>
  
  <!-- ダッシュボード -->
  <rect x="1120" y="260" width="90" height="60" rx="5" fill="#ff4081"/>
  <text x="1165" y="285" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">リアルタイム</text>
  <text x="1165" y="300" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">ダッシュボード</text>

  <!-- アラート -->
  <rect x="1220" y="260" width="90" height="60" rx="5" fill="#f44336"/>
  <text x="1265" y="285" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">アラート</text>
  <text x="1265" y="300" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">システム</text>

  <!-- レポート -->
  <rect x="1120" y="330" width="90" height="60" rx="5" fill="#2196f3"/>
  <text x="1165" y="355" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">自動レポート</text>
  <text x="1165" y="370" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">生成</text>

  <!-- API -->
  <rect x="1220" y="330" width="90" height="60" rx="5" fill="#ff9800"/>
  <text x="1265" y="355" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">予測API</text>
  <text x="1265" y="370" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">エンドポイント</text>

  <!-- バックテスト -->
  <rect x="1120" y="400" width="90" height="60" rx="5" fill="#9c27b0"/>
  <text x="1165" y="425" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">バックテスト</text>
  <text x="1165" y="440" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">エンジン</text>

  <!-- ポートフォリオ -->
  <rect x="1220" y="400" width="90" height="60" rx="5" fill="#4caf50"/>
  <text x="1265" y="425" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">ポートフォリオ</text>
  <text x="1265" y="440" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">最適化</text>

  <!-- インフラ -->
  <rect x="40" y="700" width="1320" height="80" rx="15" fill="#f5f5f5" stroke="#757575" stroke-width="2"/>
  <text x="60" y="725" font-family="Arial" font-size="16" font-weight="bold" fill="#424242">インフラストラクチャ</text>
  
  <!-- Docker Compose -->
  <rect x="300" y="730" width="800" height="40" rx="8" fill="#2496ed"/>
  <text x="700" y="755" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="white">Docker Compose</text>
  <text x="450" y="755" text-anchor="middle" font-family="Arial" font-size="12" fill="white">コンテナ管理</text>
  <text x="700" y="755" text-anchor="middle" font-family="Arial" font-size="12" fill="white">サービス orchestration</text>
  <text x="950" y="755" text-anchor="middle" font-family="Arial" font-size="12" fill="white">開発環境構築</text>

  <!-- 矢印（データフロー） -->
  <!-- データソース → インジェクション -->
  <path d="M 220 300 L 250 300" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- インジェクション → データレイクハウス -->
  <path d="M 400 280 L 430 280" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- データレイクハウス → ML -->
  <path d="M 750 350 L 780 350" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- データレイクハウス → ビジュアライゼーション -->
  <path d="M 750 580 L 780 580" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- ML → 株価システム -->
  <path d="M 1060 350 L 1090 350" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- ビジュアライゼーション → 株価システム -->
  <path d="M 1060 580 L 1090 580" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Airflow制御矢印 -->
  <path d="M 325 180 L 325 200" stroke="#1976d2" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 590 180 L 590 200" stroke="#1976d2" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 920 180 L 920 200" stroke="#1976d2" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

  <!-- 矢印マーカー定義 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
     refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
  </defs>

  <!-- 凡例 -->
  <rect x="40" y="820" width="1320" height="60" rx="10" fill="#f8f9fa" stroke="#dee2e6"/>
  <text x="60" y="840" font-family="Arial" font-size="14" font-weight="bold" fill="#333">技術スタック:</text>
  <text x="60" y="860" font-family="Arial" font-size="12" fill="#666">オーケストレーション: Airflow | ストレージ: MinIO + Delta Lake | 処理: Apache Spark | 変換: dbt | 品質: Deequ | ML: MLflow + Spark MLlib | 可視化: Metabase | カタログ: Atlas | インフラ: Docker Compose</text>
</svg>